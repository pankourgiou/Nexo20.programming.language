<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nexo20 REPL - Futuristic</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    font-family: 'Share Tech Mono', monospace;
    background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
    color: #00ffea;
    display: flex;
    flex-direction: column;
    height: 100vh;
}

header {
    text-align: center;
    padding: 20px;
    background: #0a0a0a;
    text-shadow: 0 0 10px #00ffea;
    font-size: 1.5em;
}

#terminal {
    flex: 1;
    padding: 20px;
    background: rgba(10,10,10,0.7);
    margin: 10px;
    border-radius: 10px;
    overflow-y: auto;
    white-space: pre-wrap;
    box-shadow: 0 0 20px #00ffea inset;
}

#input-line {
    display: flex;
    padding: 10px 20px;
    background: rgba(0,0,0,0.8);
    border-top: 2px solid #00ffea;
}

#prompt {
    margin-right: 10px;
    color: #00ffea;
}

#command {
    flex: 1;
    background: rgba(0,0,0,0.9);
    border: none;
    color: #00ffea;
    font-family: monospace;
    font-size: 1em;
    outline: none;
    padding: 5px 10px;
    border-radius: 5px;
}

button {
    margin-left: 10px;
    padding: 5px 10px;
    background: #00ffea;
    color: #0a0a0a;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-family: monospace;
    font-weight: bold;
    transition: 0.2s;
}

button:hover {
    background: #00c4b3;
    box-shadow: 0 0 10px #00ffea;
}

footer {
    text-align: center;
    padding: 10px;
    font-size: 0.9em;
    color: #00ffea;
    text-shadow: 0 0 5px #00ffea;
}
</style>
</head>
<body>

<header>Nexo20 REPL - Futuristic</header>

<div id="terminal"></div>

<div id="input-line">
<span id="prompt">&gt;&gt;&gt;</span>
<input type="text" id="command" placeholder="Type a command..." autofocus autocomplete="off">
<button onclick="showHelp()">Help</button>
<button onclick="showExamples()">Examples</button>
<button onclick="clearTerminal()">Clear</button>
<button onclick="exitREPL()">Exit</button>
</div>

<footer>✨ Type commands, ask Nexo20, and explore! ✨</footer>

<script>
const terminal = document.getElementById("terminal");
const commandInput = document.getElementById("command");

let variables = {};

const aiResponses = {
    "hello": "Hi! I'm Nexo20.",
    "what is ai": "AI is intelligence expressed through machines.",
    "what is your name": "I am Nexo20, your language companion."
};

const helpText = `
Nexo20 Language Commands:

set <var> = <value>   : Assign a value to a variable
out <expression>      : Output text or variable values
calc <expression>     : Evaluate a mathematical expression
mind "<question>"     : Ask the AI a question
help                  : Show this help message
exit                  : Exit the REPL
`;

const examplesText = `
Examples:

set x = 10
out x
calc x + 5
mind "hello"
`;

function print(text) {
    terminal.innerText += text + "\n";
    terminal.scrollTop = terminal.scrollHeight;
}

function resolveExpr(expr) {
    for (let v in variables) {
        const regex = new RegExp("\\b" + v + "\\b", "g");
        expr = expr.replace(regex, variables[v]);
    }
    return expr;
}

function interpretLine(line) {
    line = line.trim();
    if (!line || line.startsWith("#")) return;

    if (line === "help") {
        print(helpText);
        return;
    }

    if (line === "examples") {
        print(examplesText);
        return;
    }

    if (line.startsWith("set")) {
        const match = line.match(/^set (\w+)\s*=\s*(.+)$/);
        if (match) {
            let varName = match[1];
            let value = match[2].trim().replace(/^"|"$/g, "");
            variables[varName] = value;
        }
        return;
    }

    if (line.startsWith("out")) {
        let expr = resolveExpr(line.slice(3).trim());
        expr = expr.replace(/^"|"$/g, "");
        print(expr);
        return;
    }

    if (line.startsWith("calc")) {
        let expr = resolveExpr(line.slice(4).trim());
        try {
            let result = eval(expr);
            print(result);
        } catch (e) {
            print("Error in calc: " + e);
        }
        return;
    }

    if (line.startsWith("mind")) {
        let query = line.slice(4).trim().replace(/^"|"$/g, "").toLowerCase();
        let response = aiResponses[query] || "I'm still learning to answer that.";
        print("[AI]: " + response);
        return;
    }

    if (line === "exit") {
        exitREPL();
        return;
    }

    print("Unknown command: " + line);
}

commandInput.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        const line = commandInput.value;
        print(">>> " + line);
        interpretLine(line);
        commandInput.value = "";
    }
});

// Button functions
function showHelp() { print(helpText); }
function showExamples() { print(examplesText); }
function clearTerminal() { terminal.innerText = ""; }
function exitREPL() {
    print("Goodbye!");
    commandInput.disabled = true;
}

// Startup message
print("Welcome to Nexo20 REPL! Type 'help' for commands, 'exit' to quit.");
</script>

</body>
</html>
